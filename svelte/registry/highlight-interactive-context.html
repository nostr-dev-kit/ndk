<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Emergence - Interactive Context Highlight</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: #0a0a0a;
            color: #e5e5e5;
            line-height: 1.6;
        }

        .scroll-container {
            height: 100vh;
            overflow-y: scroll;
            scroll-behavior: smooth;
            padding: 50vh 0;
        }

        .intro {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 2rem;
            background: linear-gradient(180deg, #0a0a0a 0%, rgba(10,10,10,0.95) 80%, transparent 100%);
            z-index: 10;
            text-align: center;
            pointer-events: none;
        }

        .intro h1 {
            font-size: 2rem;
            font-weight: 200;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .intro .tagline {
            font-size: 0.85rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.15em;
        }

        .intro p {
            font-size: 0.9rem;
            color: #999;
            max-width: 600px;
            margin: 1rem auto 0;
        }

        .scroll-indicator {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            color: #666;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        .scroll-indicator::after {
            content: '‚Üì';
            font-size: 1.5rem;
        }

        .card-spacer {
            height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .emergence-card {
            width: 700px;
            max-width: 90vw;
            margin: 0 auto;
            background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
            border: 1px solid #2a2a2a;
            border-radius: 16px;
            padding: 3rem;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }

        .emergence-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #2a2a2a;
        }

        .emergence-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            flex-shrink: 0;
        }

        .emergence-meta {
            flex: 1;
        }

        .emergence-author {
            font-size: 0.95rem;
            color: #e5e5e5;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .emergence-source {
            font-size: 0.8rem;
            color: #666;
            font-style: italic;
        }

        .emergence-context {
            font-size: 1.15rem;
            line-height: 1.9;
            color: #666;
            position: relative;
            margin-bottom: 2rem;
            font-family: 'Georgia', serif;
        }

        .emergence-highlight {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            display: inline;
        }

        .emergence-highlight::before {
            content: '';
            position: absolute;
            inset: -0.25rem -0.35rem;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 165, 0, 0.1) 100%);
            border-radius: 4px;
            opacity: 0;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: -1;
        }

        .emergence-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1.5rem;
            border-top: 1px solid #2a2a2a;
        }

        .emergence-date {
            font-size: 0.75rem;
            color: #555;
            font-family: 'Courier New', monospace;
        }

        .emergence-actions {
            display: flex;
            gap: 0.75rem;
        }

        .emergence-action {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
        }

        .emergence-action:hover {
            background: #2a2a2a;
            color: #999;
            border-color: #3a3a3a;
        }

        .progress-indicator {
            position: fixed;
            top: 50%;
            right: 2rem;
            transform: translateY(-50%);
            width: 2px;
            height: 200px;
            background: #1a1a1a;
            border-radius: 1px;
            z-index: 5;
        }

        .progress-marker {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 10px;
            background: #667eea;
            border-radius: 50%;
            transition: top 0.3s ease;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }

        .center-line {
            position: fixed;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent 0%, rgba(102, 126, 234, 0.3) 50%, transparent 100%);
            z-index: 1;
            pointer-events: none;
        }

        /* Example cards styling */
        .example-cards {
            display: flex;
            flex-direction: column;
            gap: 100vh;
            margin-top: 50vh;
        }
    </style>
</head>
<body>
    <div class="intro">
        <div class="tagline">Variation Fifteen</div>
        <h1>The Emergence</h1>
        <p>
            As you scroll, watch the highlighted text emerge from the context‚Äîfading in as it approaches the center line, like memory surfacing from the subconscious, like meaning crystallizing from noise.
        </p>
    </div>

    <div class="scroll-indicator">Scroll to explore</div>
    <div class="center-line"></div>
    <div class="progress-indicator">
        <div class="progress-marker"></div>
    </div>

    <div class="scroll-container" id="scrollContainer">
        <div class="example-cards">
            <!-- Card 1 -->
            <div class="card-spacer">
                <div class="emergence-card" data-card="1">
                    <div class="emergence-header">
                        <div class="emergence-avatar"></div>
                        <div class="emergence-meta">
                            <div class="emergence-author">Virginia Woolf</div>
                            <div class="emergence-source">A Room of One's Own</div>
                        </div>
                    </div>
                    <div class="emergence-context">
                        <span class="context-before">For most of history, Anonymous was a woman. The weight of centuries bears down on these words, a truth so profound it reshapes everything we thought we knew about creativity and authorship. </span><span class="emergence-highlight">Lock up your libraries if you like; but there is no gate, no lock, no bolt that you can set upon the freedom of my mind.</span><span class="context-after"> This declaration rings across time, a defiant bell that cannot be unrung, speaking to every person who has ever been told they cannot think, cannot create, cannot be.</span>
                    </div>
                    <div class="emergence-footer">
                        <div class="emergence-date">1929 ‚Ä¢ London</div>
                        <div class="emergence-actions">
                            <div class="emergence-action">üíæ</div>
                            <div class="emergence-action">‚ÜóÔ∏è</div>
                            <div class="emergence-action">‚ö°</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card 2 -->
            <div class="card-spacer">
                <div class="emergence-card" data-card="2">
                    <div class="emergence-header">
                        <div class="emergence-avatar" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div>
                        <div class="emergence-meta">
                            <div class="emergence-author">James Baldwin</div>
                            <div class="emergence-source">The Fire Next Time</div>
                        </div>
                    </div>
                    <div class="emergence-context">
                        <span class="context-before">Love takes off masks that we fear we cannot live without and know we cannot live within. I use the word "love" here not merely in the personal sense but as a state of being, or a state of grace‚Äî</span><span class="emergence-highlight">not in the infantile American sense of being made happy but in the tough and universal sense of quest and daring and growth.</span><span class="context-after"> This is the love that asks everything and gives everything, that refuses the comfortable lies we tell ourselves, that insists on truth even when truth burns.</span>
                    </div>
                    <div class="emergence-footer">
                        <div class="emergence-date">1963 ‚Ä¢ New York</div>
                        <div class="emergence-actions">
                            <div class="emergence-action">üíæ</div>
                            <div class="emergence-action">‚ÜóÔ∏è</div>
                            <div class="emergence-action">‚ö°</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card 3 -->
            <div class="card-spacer">
                <div class="emergence-card" data-card="3">
                    <div class="emergence-header">
                        <div class="emergence-avatar" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);"></div>
                        <div class="emergence-meta">
                            <div class="emergence-author">Octavia Butler</div>
                            <div class="emergence-source">Parable of the Sower</div>
                        </div>
                    </div>
                    <div class="emergence-context">
                        <span class="context-before">In order to rise from its own ashes, a Phoenix first must burn. We do not wish to burn, but fire is our destiny. The world is changing, whether we choose change or not. </span><span class="emergence-highlight">All that you touch you change. All that you change changes you. The only lasting truth is change.</span><span class="context-after"> God is change, and we are the seeds of that change, scattered on the wind of time, taking root in unexpected places, becoming what we must become to survive.</span>
                    </div>
                    <div class="emergence-footer">
                        <div class="emergence-date">1993 ‚Ä¢ Los Angeles</div>
                        <div class="emergence-actions">
                            <div class="emergence-action">üíæ</div>
                            <div class="emergence-action">‚ÜóÔ∏è</div>
                            <div class="emergence-action">‚ö°</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card 4 -->
            <div class="card-spacer">
                <div class="emergence-card" data-card="4">
                    <div class="emergence-header">
                        <div class="emergence-avatar" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);"></div>
                        <div class="emergence-meta">
                            <div class="emergence-author">Ursula K. Le Guin</div>
                            <div class="emergence-source">The Dispossessed</div>
                        </div>
                    </div>
                    <div class="emergence-context">
                        <span class="context-before">You cannot buy the revolution. You cannot make the revolution. You can only be the revolution. It is in your spirit, or it is nowhere. The future exists only in the choices we make now, in this moment. </span><span class="emergence-highlight">To be whole is to be part; true voyage is return.</span><span class="context-after"> We leave only to come back transformed, we separate only to rejoin more completely. The circle is never broken, only expanded, encompassing more with each turn of the spiral.</span>
                    </div>
                    <div class="emergence-footer">
                        <div class="emergence-date">1974 ‚Ä¢ Portland</div>
                        <div class="emergence-actions">
                            <div class="emergence-action">üíæ</div>
                            <div class="emergence-action">‚ÜóÔ∏è</div>
                            <div class="emergence-action">‚ö°</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card 5 -->
            <div class="card-spacer">
                <div class="emergence-card" data-card="5">
                    <div class="emergence-header">
                        <div class="emergence-avatar" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);"></div>
                        <div class="emergence-meta">
                            <div class="emergence-author">Audre Lorde</div>
                            <div class="emergence-source">Sister Outsider</div>
                        </div>
                    </div>
                    <div class="emergence-context">
                        <span class="context-before">For the master's tools will never dismantle the master's house. They may allow us temporarily to beat him at his own game, but they will never enable us to bring about genuine change. </span><span class="emergence-highlight">When I dare to be powerful, to use my strength in the service of my vision, then it becomes less and less important whether I am afraid.</span><span class="context-after"> Fear becomes a companion rather than a prison, a signal rather than a stop sign. We move forward not because we are fearless, but because what we serve is greater than what we fear.</span>
                    </div>
                    <div class="emergence-footer">
                        <div class="emergence-date">1984 ‚Ä¢ New York</div>
                        <div class="emergence-actions">
                            <div class="emergence-action">üíæ</div>
                            <div class="emergence-action">‚ÜóÔ∏è</div>
                            <div class="emergence-action">‚ö°</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const scrollContainer = document.getElementById('scrollContainer');
        const cards = document.querySelectorAll('.emergence-card');
        const progressMarker = document.querySelector('.progress-marker');
        const scrollIndicator = document.querySelector('.scroll-indicator');

        function updateCards() {
            const viewportHeight = window.innerHeight;
            const centerY = viewportHeight / 2;

            // Hide scroll indicator after initial scroll
            if (scrollContainer.scrollTop > 100) {
                scrollIndicator.style.opacity = '0';
                scrollIndicator.style.pointerEvents = 'none';
            } else {
                scrollIndicator.style.opacity = '1';
            }

            cards.forEach(card => {
                const rect = card.getBoundingClientRect();
                const cardCenterY = rect.top + rect.height / 2;

                // Calculate distance from viewport center (0 = center, 1 = edge)
                const distanceFromCenter = Math.abs(cardCenterY - centerY);
                const maxDistance = viewportHeight / 2;
                const normalizedDistance = Math.min(distanceFromCenter / maxDistance, 1);

                // Inverse: 1 at center, 0 at edges
                const centerProximity = 1 - normalizedDistance;

                // Apply smooth easing
                const easedProximity = easeOutCubic(centerProximity);

                // Calculate opacity (0.3 to 1.0)
                const minOpacity = 0.3;
                const opacity = minOpacity + (easedProximity * (1 - minOpacity));

                // Calculate color intensity
                const textColor = interpolateColor(
                    [102, 102, 102], // #666 (muted)
                    [255, 255, 255], // #fff (full brightness)
                    easedProximity
                );

                // Calculate scale (0.95 to 1.0)
                const scale = 0.95 + (easedProximity * 0.05);

                // Get the highlight element
                const highlight = card.querySelector('.emergence-highlight');

                if (highlight) {
                    // Apply transformations
                    highlight.style.opacity = opacity;
                    highlight.style.color = `rgb(${textColor[0]}, ${textColor[1]}, ${textColor[2]})`;
                    highlight.style.fontWeight = 400 + Math.floor(easedProximity * 200); // 400 to 600

                    // Background glow
                    const glowOpacity = easedProximity * 0.8;
                    const before = highlight.querySelector('::before') || highlight;
                    if (easedProximity > 0.3) {
                        highlight.style.setProperty('--glow-opacity', glowOpacity);
                        // Apply via style since ::before can't be directly accessed
                        const sheet = document.styleSheets[0];
                        const glowRule = `
                            .emergence-highlight::before {
                                opacity: ${glowOpacity} !important;
                            }
                        `;
                    }

                    // Text shadow for emphasis
                    const shadowIntensity = easedProximity * 20;
                    highlight.style.textShadow = `0 0 ${shadowIntensity}px rgba(255, 215, 0, ${easedProximity * 0.3})`;
                }

                // Card scale effect
                card.style.transform = `scale(${scale})`;
                card.style.opacity = 0.5 + (easedProximity * 0.5);
            });

            // Update progress indicator
            const scrollPercent = scrollContainer.scrollTop / (scrollContainer.scrollHeight - viewportHeight);
            progressMarker.style.top = `${scrollPercent * 100}%`;
        }

        function easeOutCubic(x) {
            return 1 - Math.pow(1 - x, 3);
        }

        function interpolateColor(color1, color2, factor) {
            return color1.map((c, i) => Math.round(c + (color2[i] - c) * factor));
        }

        // Add dynamic ::before opacity updates
        const style = document.createElement('style');
        document.head.appendChild(style);

        scrollContainer.addEventListener('scroll', updateCards);
        window.addEventListener('resize', updateCards);

        // Initial update
        updateCards();

        // Smooth scroll to first card on load
        setTimeout(() => {
            scrollContainer.scrollTo({
                top: window.innerHeight * 0.5,
                behavior: 'smooth'
            });
        }, 500);
    </script>
</body>
</html>
