{"name":"embedded-event","type":"registry:component","title":"Embedded Event","description":"Display embedded Nostr events with previews","registryDependencies":[],"dependencies":["@nostr-dev-kit/ndk","@nostr-dev-kit/svelte"],"files":[{"content":"<!-- @ndk-version: embedded-event@0.8.0 -->\n<script lang=\"ts\">\n  import type { NDKSvelte } from '@nostr-dev-kit/svelte';\n  import { createEmbeddedEvent } from '@nostr-dev-kit/svelte';\n  import { defaultKindRegistry, type KindRegistry } from '../registry.svelte';\n  import GenericEmbedded from './generic-embedded.svelte';\n\n  // Load default handlers\n  import '../embedded-handlers';\n\n  interface EmbeddedEventProps {\n    ndk: NDKSvelte;\n    bech32: string;\n    variant?: 'inline' | 'card' | 'compact';\n    kindRegistry?: KindRegistry;\n    class?: string;\n  }\n\n  let {\n    ndk,\n    bech32,\n    variant = 'card',\n    kindRegistry = defaultKindRegistry,\n    class: className = ''\n  }: EmbeddedEventProps = $props();\n\n  const embedded = createEmbeddedEvent(() => ({ bech32 }), ndk);\n\n  // Lookup handler from registry\n  let handlerInfo = $derived(kindRegistry.get(embedded.event?.kind));\n\n  let Handler = $derived(handlerInfo?.component ?? GenericEmbedded);\n\n  // Wrap event using NDK wrapper class if available\n  let wrappedEvent = $derived(\n    embedded.event && handlerInfo?.wrapper?.from\n      ? handlerInfo.wrapper.from(embedded.event)\n      : embedded.event\n  );\n</script>\n\n{#if embedded.loading}\n  <div class=\"embedded-loading {className}\">\n    <div class=\"loading-spinner\"></div>\n    <span>Loading event...</span>\n  </div>\n{:else if embedded.error}\n  <div class=\"embedded-error {className}\">\n    <span>Failed to load event</span>\n  </div>\n{:else if wrappedEvent && Handler}\n  <Handler {ndk} event={wrappedEvent} {variant} />\n{/if}\n\n<style>\n  .embedded-loading,\n  .embedded-error {\n    padding: 1rem;\n    border-radius: 0.5rem;\n    border: 1px solid var(--color-border);\n    background: var(--color-muted);\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    font-size: 0.875rem;\n  }\n\n  .loading-spinner {\n    width: 1rem;\n    height: 1rem;\n    border: 2px solid var(--color-primary);\n    border-top-color: transparent;\n    border-radius: 50%;\n    animation: spin 0.6s linear infinite;\n  }\n\n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n\n  .embedded-error {\n    color: var(--color-destructive);\n  }\n</style>\n","type":"registry:ui","target":"event/content/event/event.svelte"}],"version":"0.9.0","updatedAt":"2025-10-31T07:15:56.000Z"}