{
  "name": "createReplyAction",
  "title": "Reply Action Builder",
  "oneLiner": "Reactive state manager for tracking and creating replies to Nostr events",
  "description": "The Reply Action builder provides a reactive interface for managing replies on Nostr events. It automatically subscribes to replies (both kind 1 and kind 1111 Generic Reply) for a given event and provides real-time statistics about the reply count and whether the current user has replied.\n\nThe builder uses NDK's built-in eventIsReply utility to accurately filter actual replies from all events that reference the target event. This ensures only true replies (not quotes or other references) are counted.\n\nWhen creating a reply, the builder uses NDK's reply() method which automatically handles the proper tag structure (e-tags for event references, p-tags for mentions, etc.) according to Nostr specifications.",
  "importPath": "import { createReplyAction } from '$lib/registry/builders/reply-action';",
  "command": "npx jsrepo add builders/reply-action",
  "dependencies": [
    "@nostr-dev-kit/svelte",
    "@nostr-dev-kit/ndk"
  ],
  "nips": ["01", "10"],
  "parameters": [
    {
      "name": "event",
      "type": "NDKEvent | undefined",
      "description": "The event to track replies for",
      "required": true
    }
  ],
  "returns": [
    {
      "name": "count",
      "type": "number",
      "description": "Total number of replies to the event"
    },
    {
      "name": "hasReplied",
      "type": "boolean",
      "description": "Whether the current user has replied to this event"
    },
    {
      "name": "pubkeys",
      "type": "string[]",
      "description": "Array of pubkeys who have replied"
    },
    {
      "name": "reply",
      "type": "(content: string) => Promise<NDKEvent>",
      "description": "Create and publish a reply to the event with the given content"
    }
  ],
  "usageExample": "const replyAction = createReplyAction(() => ({ event: myEvent }), ndk);\n\n// Get reply count\nreplyAction.count  // number\n\n// Check if current user replied\nreplyAction.hasReplied  // boolean\n\n// Get all pubkeys who replied\nreplyAction.pubkeys  // string[]\n\n// Create a reply\nconst replyEvent = await replyAction.reply(\"Great post!\");"
}
