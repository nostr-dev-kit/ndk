{
  "name": "createRepostAction",
  "title": "Repost Action Builder",
  "oneLiner": "Reactive state manager for tracking and creating reposts and quote posts on Nostr",
  "description": "The Repost Action builder provides a reactive interface for managing both regular reposts (kind 6 and kind 16) and quote posts (kind 1 with #q tag) on Nostr events.\n\nThe builder automatically subscribes to both regular reposts and quote posts for a given event, providing real-time statistics about the repost count and whether the current user has reposted. It counts unique pubkeys (not individual repost events) to avoid inflating counts from multiple reposts by the same user.\n\nWhen reposting, the builder intelligently toggles the state - if you haven't reposted, it creates a new repost; if you've already reposted, it deletes your existing repost. Quote posts allow adding commentary while referencing the original event using the #q tag marker.",
  "importPath": "import { createRepostAction } from '$lib/registry/builders/repost-action';",
  "command": "npx jsrepo add builders/repost-action",
  "dependencies": [
    "@nostr-dev-kit/svelte",
    "@nostr-dev-kit/ndk"
  ],
  "nips": ["01", "18"],
  "parameters": [
    {
      "name": "event",
      "type": "NDKEvent | undefined",
      "description": "The event to track reposts for",
      "required": true
    }
  ],
  "returns": [
    {
      "name": "count",
      "type": "number",
      "description": "Total number of unique users who have reposted (includes both regular reposts and quotes)"
    },
    {
      "name": "hasReposted",
      "type": "boolean",
      "description": "Whether the current user has reposted this event"
    },
    {
      "name": "pubkeys",
      "type": "string[]",
      "description": "Array of unique pubkeys who have reposted"
    },
    {
      "name": "repost",
      "type": "() => Promise<NDKEvent>",
      "description": "Toggle repost - creates repost if not reposted, deletes existing repost if already reposted"
    },
    {
      "name": "quote",
      "type": "(content: string) => Promise<NDKEvent>",
      "description": "Create a quote post with commentary on the original event"
    }
  ],
  "usageExample": "const repostAction = createRepostAction(() => ({ event: myEvent }), ndk);\n\n// Get repost count (unique users)\nrepostAction.count  // number\n\n// Check if current user reposted\nrepostAction.hasReposted  // boolean\n\n// Get all pubkeys who reposted\nrepostAction.pubkeys  // string[]\n\n// Toggle repost\nawait repostAction.repost();\n\n// Create a quote post with commentary\nawait repostAction.quote(\"This is amazing!\");"
}
