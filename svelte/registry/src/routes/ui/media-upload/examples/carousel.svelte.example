<script lang="ts">
  import { getContext } from 'svelte';
  import type { NDKSvelte } from '@nostr-dev-kit/svelte';
  import type { MediaUploadResult } from '$lib/registry/ui/embedded-event.svelte';
  import { MediaUpload } from '$lib/registry/ui/embedded-event.svelte';

  const ndk = getContext<NDKSvelte>('ndk');

  let uploads = $state<MediaUploadResult[]>([]);
</script>

<div class="border border-gray-200 rounded-xl p-6 bg-white">
  <MediaUpload.Root {ndk} bind:uploads>
    <div class="mb-4">
      <MediaUpload.Button class="px-5 py-2.5 bg-gradient-to-br from-indigo-500 to-purple-600 text-white border-none rounded-lg cursor-pointer font-semibold shadow-md transition-all hover:-translate-y-0.5 hover:shadow-lg">
        Upload Media
      </MediaUpload.Button>
    </div>

    {#if uploads.length > 0}
      <MediaUpload.Carousel class="rounded-lg overflow-hidden" />
    {/if}
  </MediaUpload.Root>
</div>
